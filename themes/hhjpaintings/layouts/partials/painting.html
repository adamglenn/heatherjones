{{ $image := "" }}
{{ $slug := .Title | urlize }}
{{ $imageHeight := "" }}
{{ $imageWidth := "" }}
{{ $imageRatio := "" }}
{{ $title := .Title }}
<div class="col-lg-6 col-xl-4 mb-4">
  {{ with .Params.featured_image }}
    {{ $image = resources.Get . }}
    {{ with resources.Get $image }}
      {{ $imageHeight = float .Height }}
      {{ $imageWidth = float .Width }}
      {{ $imageRatio = div $imageHeight $imageWidth }}
      {{ $imageRatio = mul $imageRatio 100 }}
    {{ end }}
    <div class="position-relative mb-2 ratio" style="--bs-aspect-ratio: {{ $imageRatio }}%">
      <img alt="Painting of {{ $title }}" loading="lazy" data-bs-toggle="modal" data-bs-target="#{{ $slug }}-modal" class="w-100" src='{{ ( $image.Fit "960x640 Center" ).RelPermalink }}' />
    </div>
  {{ end }}
  <div class="d-flex justify-content-between align-items-center">
    {{ if ne .Params.sold true }}
      <p class="d-inline-block mb-0">${{ .Params.price }}</p>
      <div class="btn-group">
        <button class="btn btn-dark btn-sm snipcart-add-item"
          data-item-id="{{ $slug }}"
          data-item-price="{{ .Params.price }}"
          data-item-description="{{ .Description }}"
          {{ with .Params.featured_image }}
            {{ $image = resources.Get . }}
            data-item-image="{{ ( $image.Fit "200x200 Center" ).RelPermalink }}"
          {{ end }}
          data-item-name="{{ .Title }}"
        >
          <span class="fas fa-plus"></span> Add to Cart
        </button>
        <a class="btn btn-outline-dark btn-sm" href="{{ .RelPermalink }}">View Page</a>
      </div>
    {{ else }}
      <div class="text-danger text-uppercase"><strong>Sold</strong></div>
      <a class="btn btn-outline-dark btn-sm" href="{{ .RelPermalink }}">View Page</a>
    {{ end }}
  </div>
  <div class="modal fade" id="{{ $slug }}-modal" tabindex="-1" aria-labelledby="{{ $slug }}-modal-label" aria-hidden="true">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title h1 muse" id="{{ $slug }}-modal-label">{{ .Title }}</h2>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          {{ with .Params.featured_image }}
            {{ $image = resources.Get . }}
            <img class="w-100" src='{{ ( $image.Fit "2000x2000 Center" ).RelPermalink }}' />
          {{ end }}
        </div>
      </div>
    </div>
  </div>
</div>